#include "ps2_runtime_macros.h"
#include "ps2_runtime.h"
#include "ps2_syscalls.h"
#include "ps2_stubs.h"
#include "ps2_init_log.h"

// Ghidra decomp base addresses (derived from first-store: addr = base + offset)
static constexpr uint32_t kBGData_Stage2  = 0x2606d0u;  // 0x260e58 - 1928
static constexpr uint32_t kBGData_Stage3  = 0x261520u;  // 0x261554 - 52
static constexpr uint32_t kBGData_Training= 0x261348u;  // 0x26145c - 276
static constexpr uint32_t kBGData_Stage4  = 0x2616d8u;  // 0x2616f0 - 24
static constexpr uint32_t kBGData_Stage5  = 0x2626e8u;  // 0x26273c - 84
static constexpr uint32_t kBGData_Adver  = 0x2640d8u;  // 0x2641ec - 1368

void ps2___sinit_bgctrl_cc_0x2c2380(uint8_t* rdram, R5900Context* ctx, PS2Runtime* runtime) {
    PS2_INIT_LOG_ENTRY("ps2___sinit_bgctrl_cc");

    WRITE32(kBGData_Stage2 + 1928, 0u);
    WRITE32(kBGData_Stage3 + 52, 0xfffff556u);
    WRITE32(kBGData_Training + 276, 0xfffff556u);
    WRITE32(kBGData_Stage3 + 248, 0u);
    WRITE32(kBGData_Stage3 + 472, 0x1111u);
    WRITE32(kBGData_Stage3 + 500, 0xffff8000u);
    WRITE32(kBGData_Stage3 + 528, 0xffffc000u);
    WRITE32(kBGData_Stage3 + 556, 0xa03u);
    WRITE32(kBGData_Stage3 + 584, 0x1111u);
    WRITE32(kBGData_Stage3 + 612, 0xffffc000u);
    WRITE32(kBGData_Stage3 + 640, 0xa03u);
    WRITE32(kBGData_Stage3 + 668, 0xffffc000u);
    WRITE32(kBGData_Stage3 + 752, 0x1556u);
    WRITE32(kBGData_Stage3 + 780, 0x4000u);
    WRITE32(kBGData_Stage3 + 808, 0x4000u);
    WRITE32(kBGData_Stage3 + 836, 0x4000u);
    WRITE32(kBGData_Stage3 + 864, 0x1556u);
    WRITE32(kBGData_Stage3 + 892, 0x4000u);
    WRITE32(kBGData_Stage3 + 920, 0x4000u);
    WRITE32(kBGData_Stage3 + 948, 0x4000u);
    WRITE32(kBGData_Stage3 + 1228, 0xffffe000u);
    WRITE32(kBGData_Stage3 + 1368, 0u);
    WRITE32(kBGData_Stage3 + 1396, 0u);
    WRITE32(kBGData_Stage3 + 1424, 0u);
    WRITE32(kBGData_Stage3 + 1452, 0u);
    WRITE32(kBGData_Stage3 + 1480, 0u);
    WRITE32(kBGData_Stage3 + 1508, 0u);
    WRITE32(kBGData_Stage3 + 1536, 0u);
    WRITE32(kBGData_Stage3 + 1788, 0u);
    WRITE32(kBGData_Stage3 + 1816, 0u);
    WRITE32(kBGData_Stage3 + 1844, 0u);
    WRITE32(kBGData_Stage4 + 24, 0u);
    WRITE32(kBGData_Stage4 + 52, 0u);
    WRITE32(kBGData_Stage4 + 80, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 108, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 136, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 164, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 192, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 220, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 248, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 276, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 304, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 332, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 360, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 388, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 416, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 444, 0xffff8000u);
    WRITE32(kBGData_Stage4 + 472, 0u);
    WRITE32(kBGData_Stage4 + 500, 0u);
    WRITE32(kBGData_Stage4 + 528, 0u);
    WRITE32(kBGData_Stage4 + 556, 0u);
    WRITE32(kBGData_Stage4 + 584, 0u);
    WRITE32(kBGData_Stage4 + 612, 0u);
    WRITE32(kBGData_Stage4 + 640, 0u);
    WRITE32(kBGData_Stage4 + 780, 0xffff80f2u);
    WRITE32(kBGData_Training + 584, 0xffff80f2u);
    WRITE32(kBGData_Stage4 + 808, 0x3a68u);
    WRITE32(kBGData_Training + 612, 0x3a68u);
    WRITE32(kBGData_Stage4 + 836, 0x4038u);
    WRITE32(kBGData_Training + 640, 0x4038u);
    WRITE32(kBGData_Stage4 + 864, 0xffffe6cbu);
    WRITE32(kBGData_Training + 668, 0xffffe6cbu);
    WRITE32(kBGData_Stage4 + 892, 0xffffbff0u);
    WRITE32(kBGData_Training + 696, 0xffffbff0u);
    WRITE32(kBGData_Stage4 + 920, 0xffffaf3eu);
    WRITE32(kBGData_Training + 724, 0xffffaf3eu);
    WRITE32(kBGData_Stage4 + 948, 0xffff9923u);
    WRITE32(kBGData_Training + 752, 0xffff9923u);
    WRITE32(kBGData_Stage4 + 976, 0xffffd0a1u);
    WRITE32(kBGData_Training + 780, 0xffffd0a1u);
    WRITE32(kBGData_Stage4 + 1004, 0x45c1u);
    WRITE32(kBGData_Training + 808, 0x45c1u);
    WRITE32(kBGData_Stage4 + 1032, 0u);
    WRITE32(kBGData_Stage4 + 1060, 0u);
    WRITE32(kBGData_Stage4 + 1088, 0u);
    WRITE32(kBGData_Stage4 + 1116, 0u);
    WRITE32(kBGData_Stage4 + 1144, 0u);
    WRITE32(kBGData_Stage4 + 1172, 0u);
    WRITE32(kBGData_Stage4 + 1200, 0u);
    WRITE32(kBGData_Stage4 + 1228, 0u);
    WRITE32(kBGData_Stage4 + 1256, 0u);
    WRITE32(kBGData_Stage4 + 1284, 0u);
    WRITE32(kBGData_Stage4 + 1312, 0u);
    WRITE32(kBGData_Stage4 + 1340, 0u);
    WRITE32(kBGData_Stage4 + 1368, 0u);
    WRITE32(kBGData_Stage4 + 1396, 0u);
    WRITE32(kBGData_Stage4 + 1424, 0u);
    WRITE32(kBGData_Stage4 + 1452, 0u);
    WRITE32(kBGData_Stage4 + 1480, 0u);
    WRITE32(kBGData_Stage4 + 1508, 0u);
    WRITE32(kBGData_Stage4 + 1536, 0u);
    WRITE32(kBGData_Stage4 + 1564, 0u);
    WRITE32(kBGData_Stage4 + 1592, 0u);
    WRITE32(kBGData_Stage4 + 1620, 0u);
    WRITE32(kBGData_Stage4 + 1788, 0u);
    WRITE32(kBGData_Stage4 + 1816, 0u);
    WRITE32(kBGData_Stage4 + 1844, 0u);
    WRITE32(kBGData_Stage4 + 1872, 0u);
    WRITE32(kBGData_Stage4 + 1956, 0u);
    WRITE32(kBGData_Stage4 + 2068, 0u);
    WRITE32(kBGData_Stage4 + 2096, 0u);
    WRITE32(kBGData_Stage4 + 2124, 0u);
    WRITE32(kBGData_Stage4 + 2152, 0u);
    WRITE32(kBGData_Stage4 + 2180, 0u);
    WRITE32(kBGData_Stage4 + 2208, 0u);
    WRITE32(kBGData_Stage4 + 2236, 0u);
    WRITE32(kBGData_Stage4 + 2264, 0u);
    WRITE32(kBGData_Stage4 + 2292, 0u);
    WRITE32(kBGData_Stage4 + 2320, 0u);
    WRITE32(kBGData_Stage4 + 2348, 0u);
    WRITE32(kBGData_Stage4 + 2376, 0u);
    WRITE32(kBGData_Stage4 + 2404, 0u);
    WRITE32(kBGData_Stage4 + 2432, 0u);
    WRITE32(kBGData_Stage5 + 52, 0u);
    WRITE32(kBGData_Stage5 + 80, 0u);
    WRITE32(kBGData_Stage5 + 108, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 136, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 164, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 192, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 220, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 248, 0u);
    WRITE32(kBGData_Stage5 + 276, 0u);
    WRITE32(kBGData_Stage5 + 304, 0u);
    WRITE32(kBGData_Stage5 + 332, 0u);
    WRITE32(kBGData_Stage5 + 360, 0u);
    WRITE32(kBGData_Stage5 + 388, 0u);
    WRITE32(kBGData_Stage5 + 416, 0u);
    WRITE32(kBGData_Stage5 + 444, 0u);
    WRITE32(kBGData_Stage5 + 472, 0u);
    WRITE32(kBGData_Stage5 + 724, 0u);
    WRITE32(kBGData_Stage5 + 752, 0u);
    WRITE32(kBGData_Stage5 + 780, 0u);
    WRITE32(kBGData_Stage5 + 892, 0u);
    WRITE32(kBGData_Stage5 + 920, 0u);
    WRITE32(kBGData_Stage5 + 948, 0u);
    WRITE32(kBGData_Stage5 + 976, 0u);
    WRITE32(kBGData_Stage5 + 1004, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1032, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1060, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1088, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1116, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1144, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1172, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1200, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1228, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1256, 0u);
    WRITE32(kBGData_Stage5 + 1284, 0u);
    WRITE32(kBGData_Stage5 + 1312, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1340, 0u);
    WRITE32(kBGData_Stage5 + 1368, 0u);
    WRITE32(kBGData_Stage5 + 1396, 0u);
    WRITE32(kBGData_Stage5 + 1424, 0u);
    WRITE32(kBGData_Stage5 + 1452, 0u);
    WRITE32(kBGData_Stage5 + 1480, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1508, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1536, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1564, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1592, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1620, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1648, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1676, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1704, 0xffff8000u);
    WRITE32(kBGData_Stage5 + 1732, 0xffff8000u);
    WRITE32(kBGData_Adver + 1368, 0u);
    WRITE32(kBGData_Adver + 1396, 0u);
    WRITE32(kBGData_Adver + 1424, 0u);
    WRITE32(kBGData_Adver + 1452, 0u);
    WRITE32(kBGData_Adver + 1480, 0u);
    WRITE32(kBGData_Adver + 1508, 0u);
    WRITE32(kBGData_Adver + 1536, 0u);
    WRITE32(kBGData_Adver + 1564, 0u);
    WRITE32(kBGData_Adver + 1592, 0xffff8001u);
    WRITE32(kBGData_Adver + 1620, 0xffff8001u);
    WRITE32(kBGData_Adver + 1648, 0xffff8001u);
    WRITE32(kBGData_Adver + 1676, 0xffff8001u);
    WRITE32(kBGData_Adver + 1704, 0xffff8001u);
    WRITE32(kBGData_Adver + 1732, 0xffff8001u);
    ctx->pc = getRegU32(ctx, 31);
}
